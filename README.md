# OperatorDev
算子开发
## 1.OptimizeGEMM
这个文件夹下面的优化GEMM方法是跟着flame/how-to-optimize-gemm这个项目进行学习的第一个算子优化的项目(并没有优化到极致)
本项目是针对列主序的通用矩阵乘进行优化,主要包括:
- 朴素的矩阵乘的一次内积变做通过调用内积函数add_dot,一次做四次内积add_dot1x4,修改步距以达成;
- 将内积函数add_dot内联到add_dot1x4中,减少函数调用,并放置在一个for中,减少循环次数,同时利用空间局部性;
- 采用寄存器来存储频繁使用的数据,对B阵则将宏替换换作指针寻址,减少浮点操作次数;
- 对B阵的指针寻址换做间接寻址,循环展开;
以上是将1次内积变为4次内积,并作出的优化手段,接着在4次内积的基础上优化为4x4,共16次内积的优化:
- 采用寄存器将频繁使用的值进行存储;
- 采用intrinsic编程(SSE指令集);
- 将矩阵分块为A(256\*128),B(128\*1024),并对A阵的分块内容进行打包,存储在连续的内存空间;
- 将B阵的分块也进行打包,同时避免重复的数据获取